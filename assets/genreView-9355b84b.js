import{_ as y,I as k,b as m,r as f,o as d,c as h,a as e,d as l,w,j as g,t as v,k as p,g as _,h as P,f as V,p as M,i as C}from"./index-54d86136.js";const I={components:{Icon:k},data(){return{genreName:"",videoKey:null,selectedMovieId:null,movies:[],currentPage:1,totalPages:null,maxVisiblePages:5}},created(){this.fetchGenreName(),this.fetchMovies(this.currentPage)},computed:{paginationRange(){const t=[],o=Math.max(1,this.currentPage-Math.floor(this.maxVisiblePages/2)),n=Math.min(o+this.maxVisiblePages-1,this.totalPages);for(let a=o;a<=n;a++)t.push(a);return t}},methods:{fetchGenreName(){const o="https://api.themoviedb.org/3/genre/movie/list?api_key=e322ec768a4787f47c3a2896362e2b67",n=this.$route.params.id;console.log(n),m.get(o).then(a=>{const r=a.data.genres.find(c=>c.id===parseInt(n));this.genreName=r?r.name:"Unknown Genre"}).catch(a=>{console.error("Error fetching genre name:",a)})},fetchPreviousPage(){this.currentPage>1&&this.fetchMovies(this.currentPage-1)},fetchNextPage(){this.currentPage<this.totalPages&&this.fetchMovies(this.currentPage+1)},fetchMovies(t){const o="e322ec768a4787f47c3a2896362e2b67",n=this.$route.params.id,a=`https://api.themoviedb.org/3/discover/movie?api_key=${o}&with_genres=${n}`;m.get(a,{params:{page:t}}).then(s=>{this.movies=s.data.results,this.currentPage=s.data.page,this.totalPages=s.data.total_pages,this.movies.length>0&&this.showMovieVideo(this.movies[0].id)}).catch(s=>{console.error("Error fetching movie:",s)})},showMovieVideo(t){this.selectedMovieId=t,this.fetchVideos(t),this.scrollToVideoSection()},scrollToVideoSection(){this.$refs.videoSection.scrollIntoView({behavior:"smooth",block:"start"})},fetchVideos(t){const n=`https://api.themoviedb.org/3/movie/${t}/videos?api_key=e322ec768a4787f47c3a2896362e2b67`;m.get(n).then(a=>{const s=a.data.results;s.length>0&&(this.videoKey=s[0].key)}).catch(a=>{console.error("Error fetching movies:",a)})},showMovieDetail(t){return this.$router.push({path:`/movie/details/${t}`,params:{id:t}})},getVideoUrl(t){return`https://www.youtube.com/${t}`}}},u=t=>(M("data-v-9bfa05cb"),t=t(),C(),t),N={class:"container-fluid"},S=u(()=>e("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarsExample02","aria-controls":"navbarsExample02","aria-expanded":"false","aria-label":"Toggle navigation"},[e("span",{class:"navbar-toggler-icon"})],-1)),E={class:"collapse navbar-collapse",id:"navbarsExample02"},K=u(()=>e("ul",{class:"navbar-nav mx-auto"},[e("span",{class:"navbar-brand mx-auto"},"Star-Films")],-1)),B={class:""},G={class:"container-fluid mt-5"},T={style:{"--bs-breadcrumb-divider":`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8'%3E%3Cpath d='M2.5 0L1 1.5 3.5 4 1 6.5 2.5 8l4-4-4-4z' fill='%236c757d'/%3E%3C/svg%3E")`},"aria-label":"breadcrumb"},j={class:"breadcrumb"},z=u(()=>e("li",{class:"breadcrumb-item"},[e("a",{href:"#",style:{"text-decoration":"none",color:"inherit"}},"Home")],-1)),D=u(()=>e("li",{class:"breadcrumb-item"},"category",-1)),F={class:"breadcrumb-item active","aria-current":"page"},L={class:"container-fluid"},R={class:"d-flex justify-content-between"},U={class:"text-left text-white"},H={class:"page"},$={class:"pagination pagination-sm"},q=["onClick"],A={key:0,ref:"videoSection"},J=["src"],O={class:"row g-2"},Q=["onClick"],W=["src"];function X(t,o,n,a,s,r){const c=f("Icon"),b=f("router-link");return d(),h(_,null,[e("nav",{class:g(["navbar navbar-expand bg-black",{navbar:!0,scrolled:t.isScrolled}]),"aria-label":"Second navbar example"},[e("div",N,[l(b,{class:"navbar-brand",to:"/"},{default:w(()=>[l(c,{icon:"mingcute:arrow-left-fill",color:"white",width:"40",class:"p-2 mt-1"})]),_:1}),S,e("div",E,[K,e("div",B,[l(c,{icon:"akar-icons:search",color:"white",width:"20",class:"head-add mx-3"}),l(b,{class:"navbar-brand",to:"/"},{default:w(()=>[l(c,{icon:"clarity:user-solid",color:"white",width:"20",class:"head-add"})]),_:1})])])])],2),e("div",G,[e("nav",T,[e("ol",j,[z,D,e("li",F,v(s.genreName),1)])])]),e("div",null,[e("div",L,[e("div",R,[e("h2",U,v(s.genreName),1),e("nav",H,[e("ul",$,[e("li",{class:g(["page-item",{disabled:s.currentPage===1}])},[e("a",{class:"page-link",href:"#",onClick:o[0]||(o[0]=p((...i)=>r.fetchPreviousPage&&r.fetchPreviousPage(...i),["prevent"]))},[l(c,{icon:"ooui:previous-ltr",color:"white"})])],2),(d(!0),h(_,null,P(r.paginationRange,i=>(d(),h("li",{class:g(["page-item",{active:i===s.currentPage}]),key:i},[e("a",{class:"page-link",href:"#",onClick:p(x=>r.fetchMovies(i),["prevent"])},v(i),9,q)],2))),128)),e("li",{class:g(["page-item",{disabled:s.currentPage===s.totalPages}])},[e("a",{class:"page-link",href:"#",onClick:o[1]||(o[1]=p((...i)=>r.fetchNextPage&&r.fetchNextPage(...i),["prevent"]))},[l(c,{icon:"ooui:previous-rtl",color:"white"})])],2)])])]),s.videoKey?(d(),h("div",A,[e("iframe",{src:"https://www.youtube.com/embed/"+s.videoKey,class:"iframe2",frameborder:"0",allowfullscreen:""},null,8,J)],512)):V("",!0),e("div",O,[(d(!0),h(_,null,P(s.movies,i=>(d(),h("div",{class:"col-4 col-md- 3 col-lg-3",key:i.id,onClick:x=>r.showMovieVideo(i.id)},[e("img",{src:"https://image.tmdb.org/t/p/original/"+i.poster_path,class:"img-fluid mt-3",alt:""},null,8,W)],8,Q))),128))])])])],64)}const Z=y(I,[["render",X],["__scopeId","data-v-9bfa05cb"]]);export{Z as default};
