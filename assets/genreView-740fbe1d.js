import{_ as V,I as M,g as C,a as v,r as g,o as d,c as h,b as e,e as c,w as m,n as u,t as _,j as p,F as b,d as k,h as I,f as N,p as S,i as E}from"./index-56473286.js";const K={components:{Icon:M,FooterVue:C},data(){return{genreName:"",videoKey:null,selectedMovieId:null,movies:[],currentPage:1,totalPages:null,maxVisiblePages:5}},created(){this.fetchGenreName(),this.fetchMovies(this.currentPage)},computed:{paginationRange(){const t=[],o=Math.max(1,this.currentPage-Math.floor(this.maxVisiblePages/2)),n=Math.min(o+this.maxVisiblePages-1,this.totalPages);for(let a=o;a<=n;a++)t.push(a);return t}},methods:{fetchGenreName(){const o="https://api.themoviedb.org/3/genre/movie/list?api_key=e322ec768a4787f47c3a2896362e2b67",n=this.$route.params.id;console.log(n),v.get(o).then(a=>{const r=a.data.genres.find(l=>l.id===parseInt(n));this.genreName=r?r.name:"Unknown Genre"}).catch(a=>{console.error("Error fetching genre name:",a)})},fetchPreviousPage(){this.currentPage>1&&this.fetchMovies(this.currentPage-1)},fetchNextPage(){this.currentPage<this.totalPages&&this.fetchMovies(this.currentPage+1)},fetchMovies(t){const o="e322ec768a4787f47c3a2896362e2b67",n=this.$route.params.id,a=`https://api.themoviedb.org/3/discover/movie?api_key=${o}&with_genres=${n}`;v.get(a,{params:{page:t}}).then(s=>{this.movies=s.data.results,this.currentPage=s.data.page,this.totalPages=s.data.total_pages,this.movies.length>0&&this.showMovieVideo(this.movies[0].id)}).catch(s=>{console.error("Error fetching movie:",s)})},showMovieVideo(t){this.selectedMovieId=t,this.fetchVideos(t),this.scrollToVideoSection()},scrollToVideoSection(){this.$refs.videoSection.scrollIntoView({behavior:"smooth",block:"start"})},fetchVideos(t){const n=`https://api.themoviedb.org/3/movie/${t}/videos?api_key=e322ec768a4787f47c3a2896362e2b67`;v.get(n).then(a=>{const s=a.data.results;s.length>0&&(this.videoKey=s[0].key)}).catch(a=>{console.error("Error fetching movies:",a)})},showMovieDetail(t){return this.$router.push({path:`/movie/details/${t}`,params:{id:t}})},getVideoUrl(t){return`https://www.youtube.com/${t}`}}},f=t=>(S("data-v-ddeb8ade"),t=t(),E(),t),F={class:"container-fluid"},L=f(()=>e("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarsExample02","aria-controls":"navbarsExample02","aria-expanded":"false","aria-label":"Toggle navigation"},[e("span",{class:"navbar-toggler-icon"})],-1)),R={class:"collapse navbar-collapse",id:"navbarsExample02"},T=f(()=>e("ul",{class:"navbar-nav mx-auto"},[e("span",{class:"navbar-brand mx-auto"},"Star-Films")],-1)),B={class:""},G={class:"container-fluid mt-5"},j={style:{"--bs-breadcrumb-divider":`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8'%3E%3Cpath d='M2.5 0L1 1.5 3.5 4 1 6.5 2.5 8l4-4-4-4z' fill='%236c757d'/%3E%3C/svg%3E")`},"aria-label":"breadcrumb"},z={class:"breadcrumb"},D={class:"breadcrumb-item"},U={href:"#",style:{"text-decoration":"none",color:"inherit"}},H=f(()=>e("li",{class:"breadcrumb-item"},"category",-1)),$={class:"breadcrumb-item active","aria-current":"page"},q={class:"container-fluid"},A={class:"d-flex justify-content-between"},J={class:"text-left text-white"},O={class:"page"},Q={class:"pagination pagination-sm"},W=["onClick"],X={key:0,ref:"videoSection",class:"videoContainer"},Y=["src"],Z={class:"row g-2"},ee=["onClick"],te=["src"];function se(t,o,n,a,s,r){const l=g("Icon"),w=g("router-link"),x=g("RouterLink"),y=g("footer-vue");return d(),h(b,null,[e("nav",{class:u(["navbar navbar-expand bg-black",{navbar:!0,scrolled:t.isScrolled}]),"aria-label":"Second navbar example"},[e("div",F,[c(w,{class:"navbar-brand",to:"/"},{default:m(()=>[c(l,{icon:"mingcute:arrow-left-fill",color:"white",width:"40",class:"p-2 mt-1"})]),_:1}),L,e("div",R,[T,e("div",B,[c(l,{icon:"akar-icons:search",color:"white",width:"20",class:"head-add mx-3"}),c(w,{class:"navbar-brand",to:"/"},{default:m(()=>[c(l,{icon:"clarity:user-solid",color:"white",width:"20",class:"head-add"})]),_:1})])])])],2),e("div",G,[e("nav",j,[e("ol",z,[e("li",D,[e("a",U,[c(x,{to:"/"},{default:m(()=>[N("Home")]),_:1})])]),H,e("li",$,_(s.genreName),1)])])]),e("div",null,[e("div",q,[e("div",A,[e("h2",J,_(s.genreName),1),e("nav",O,[e("ul",Q,[e("li",{class:u(["page-item",{disabled:s.currentPage===1}])},[e("a",{class:"page-link",href:"#",onClick:o[0]||(o[0]=p((...i)=>r.fetchPreviousPage&&r.fetchPreviousPage(...i),["prevent"]))},[c(l,{icon:"ooui:previous-ltr",color:"black"})])],2),(d(!0),h(b,null,k(r.paginationRange,i=>(d(),h("li",{class:u(["page-item",{active:i===s.currentPage}]),key:i},[e("a",{class:"page-link",href:"#",onClick:p(P=>r.fetchMovies(i),["prevent"])},_(i),9,W)],2))),128)),e("li",{class:u(["page-item",{disabled:s.currentPage===s.totalPages}])},[e("a",{class:"page-link",href:"#",onClick:o[1]||(o[1]=p((...i)=>r.fetchNextPage&&r.fetchNextPage(...i),["prevent"]))},[c(l,{icon:"ooui:previous-rtl",color:"black"})])],2)])])]),s.videoKey?(d(),h("div",X,[e("iframe",{src:"https://www.youtube.com/embed/"+s.videoKey,class:"iframe2",frameborder:"0",autoplay:"",allowfullscreen:""},null,8,Y)],512)):I("",!0),e("div",Z,[(d(!0),h(b,null,k(s.movies,i=>(d(),h("div",{class:"col-3 col-md- 3 col-lg-3",key:i.id,onClick:P=>r.showMovieVideo(i.id)},[e("img",{src:"https://image.tmdb.org/t/p/original/"+i.poster_path,class:"img-fluid mt-3",alt:""},null,8,te)],8,ee))),128))])])]),c(y)],64)}const oe=V(K,[["render",se],["__scopeId","data-v-ddeb8ade"]]);export{oe as default};
